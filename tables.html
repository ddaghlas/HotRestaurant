<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <title>Tables</title>
</head>
<body>
    <div class="container">
        <div class="jumbotron">
        <h1 class="display-4 text-center">Hot Restaurant</h1>

        <hr class="my-4">
        <p class="lead text-center">We only have 5 tables! Book your seat before they are all gone!</p>
        <div class="text-center">
            <a class="btn btn-danger btn-lg" href="reserve.html" role="button">Make Reservation</a>
        </div>
      </div>
      <div class="container" id="box">Current Reservations
        <div class="card px-5" style="width: 75%;">
            <div class="card-body">
              <h1 class="card-title">Table #</h1>
              <p class="card-text">ID</p>
              <p class="card-text">Name</p>
              <p class="card-text">Email</p>
              <p class="card-text">Phone</p>
             </div>
          </div>
        </div>
      <a href="">API Table Link</a>

      |
      <a href="">API Wait List</a>
     </div>
      <script>
        fetch('/api/tables', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        })
          .then((response) => response.json())
          .then((data) => {
            createCards(data);
          })
          .catch((error) => {
            console.error('Error:', error);
          });

        // fetch('/api/waitlist', {
        //   method: 'GET',
        //   headers: {
        //     'Content-Type': 'application/json',
        //   },
        // })
        //   .then((response) => response.json())
        //   .then((data) => {
        //     createCards(data);
        //   })
        //   .catch((error) => {
        //     console.error('Error:', error);
        // });

        function createCards(data) {
          let cardbox = document.getElementById('box');
          data.forEach((reserve, index) => {
            let cardHtml = `<div class="card" style="width: 18rem;">
              <div class="card-body">
                <h5 class="card-title">Table #${(index+1)}</h5>
                <p class="card-text">${reserve.name}</h6>
                <p class="card-text">Phone: ${reserve.phone}</p>
                <p class="card-text">Email: ${reserve.email}</p>
                <p class="card-text">ID: ${reserve.id}</p>
              </div>
            </div>`

            cardbox.appendChild(cardHtml);
          });
        }
      </script>
</body>
</html> 